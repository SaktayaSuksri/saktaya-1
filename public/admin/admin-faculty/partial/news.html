<style>
    #form-container {
        width: 500px;
    }

    .row {
        margin-top: 15px;
    }

    .row.form-group {
        padding-left: 15px;
        padding-right: 15px;
    }

    .btn {
        margin-left: 15px;
    }

    .change-link {
        background-color: #000;
        border-bottom-left-radius: 6px;
        border-bottom-right-radius: 6px;
        bottom: 0;
        color: #fff;
        opacity: 0.8;
        padding: 4px;
        position: absolute;
        text-align: center;
        width: 150px;
    }

    .change-link:hover {
        color: #fff;
        text-decoration: none;
    }

    img {
        width: 150px;
    }

    #editor-container {
        height: 130px;
    }
</style>
<div class="container-fluid" ng-controller="news" ng-init="init()">

    <div class="row">
        <div class="col-lg-12 col-md-12">
            <div class="card card-nav-tabs">
                <div class="card-header" data-background-color="purple">
                    <div class="nav-tabs-navigation">
                        <div class="nav-tabs-wrapper">
                            <span class="nav-tabs-title">ประเภท:</span>
                            <ul class="nav nav-tabs" data-tabs="tabs">
                                <li>
                                    <a ng-click="reload_table('')">
                                                        <i class="material-icons">bug_report</i> All
                                                        <div class="ripple-container"></div>
                                                    </a>
                                </li>
                                <li ng-repeat="item in catagory_list">
                                    <a ng-click="reload_table(item)">
                                                        <i class="material-icons">bug_report</i> {{item.resourceName}}
                                                        <div class="ripple-container"></div>
                                                    </a>
                                </li>

                                <!--
                                        <li class="active">
                                            <a href="#profile" data-toggle="tab">
                                                <i class="material-icons">bug_report</i> ตรี
                                                <div class="ripple-container"></div>
                                            </a>
                                        </li>
                                        -->


                            </ul>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <button ng-click="modal_create_news()" class="btn btn-white btn-round btn-just-icon" style="position: absolute; right: 0;"> 
                                        <i class="material-icons">add</i>
                                    </button>


                    <div style="overflow-x:auto;">
                        <table ng-table="news_table" class="table table-striped table-bordered table-condensed" width="100%" show-filter="true">
                            <tr ng-repeat="item in $data">

                                <td title="'topicPicture'" filter="{ topicPicture: 'text'}" sortable="'topicPicture'" width="15%">

                                    <img ng-if="item.topicPicture != ''" ng-src="{{item.topicPicture}}" class="img-fluid" onerror="this.src='./assets/img/image_placeholder.jpg';" alt="Not found" style="width:157px;height:69px">

                                    <img ng-if="item.topicPicture == ''" ng-src="/assets/img/image_placeholder.jpg" class="img-fluid" onerror="this.src='./assets/img/image_placeholder.jpg';" alt="Not found" style="width:157px;height:69px">

                                </td>

                                <td title="'topicShort'" filter="{ topicShort: 'text'}" sortable="'topicShort'" width="15%">


                                    <div ng-bind-html="item.topicShort| limitTo:40"></div>

                                </td>


                                <td title="'detailShort'" filter="{ detailShort: 'text'}" sortable="'detailShort'" width="30%">

                                    <div ng-bind-html="item.detailShort | limitTo:100"></div>


                                </td>
                                <td title="'datetimePost'" filter="{datetimePost: 'text'}" sortable="'datetimePost'" width="5%">
                                    {{item.datetimePost}}</td>
                                <td title="'author'" filter="{author: 'text'}" sortable="'author'" width="5%">
                                    {{item.author}}</td>
                                <td title="'readCount'" filter="{readCount: 'text'}" sortable="'readCount'" width="5%">
                                    {{item.readCount}}</td>
                                <td title="'isPinned'" filter="{isPinned: 'text'}" sortable="'isPinned'" width="5%">

                                    <div ng-if="!item.isPinned">
                                        {{item.isPinned}}
                                    </div>
                                    <div ng-if="item.isPinned">
                                        <img src="./assets/img/pin-icon.png" class="img-circle" alt="cannot to load" style="height:30px; width:25px">

                                    </div>

                                </td>


                                <td title="'tagId'" width="5%">
                                    <button ng-repeat="itemitem in item.tagId" class="btn btn-primary btn-xs">{{itemitem}}
                                                                                    </button>

                                </td>

                                <td title="'departmentId'" filter="{departmentId: 'text'}" sortable="'departmentId'" width="5%">
                                    {{item.departmentId}}</td>


                                <td class="" width="10%">
                                    <button type="button" ng-click="modal_update_news(item)" rel="tooltip" title="Edit Task" class="btn btn-primary btn-simple btn-xs">
                                                                                                    <i class="material-icons">edit</i>
                                                                                                </button>
                                    <button type="button" ng-click="delete_news(item)" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
                                                                                                    <i class="material-icons">close</i>
                                                                                                </button>
                                </td>

                            </tr>
                        </table>


                    </div>
                </div>
            </div>
        </div>

    </div>







    <div id="modal_update_news" class="modal fade" tabindex="-1" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" style="width:90%">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h3 class="modal-title ">ข่าว</h3>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">

                  <div class="container-fluid">
                    <div calss="row">

                        <div class="col-md-6">


                            <div  class="">
                                <form>
                                    <div class="row">
                                        <div class="col-xs-4">
                                            <img ng-if="modal_update_news_data.topicPicture != ''" class="img-rounded" style="margin-top: 30px" height="150px" ng-src="{{modal_update_news_data.topicPicture}}" onerror="this.src='./assets/img/image_placeholder.jpg';" alt="not found">
                                            <img ng-if="modal_update_news_data.topicPicture == ''" class="img-rounded" style="margin-top: 30px" height="150px" ng-src="/assets/img/image_placeholder.jpg" onerror="this.src='./assets/img/image_placeholder.jpg';" alt="not found">



                                            <input type="file" id="fileupload" class="change-link" fileinput="file" filepreview="modal_update_news_data.topicPicture">


                                        </div>
                                        <div class="col-xs-8">

                                            <div class="form-group">
                                                <label for="exampleSelect1">ประเภท </label>
                                                <select class="form-control" ng-model="modal_update_news_data.resourceId">
                              <option ng-repeat="item in catagory_list" value="{{item._id}}">{{item.resourceName}}</option>
                            
                            </select>
                                            </div>



                                            <div class="form-group">
                                                <label for="location">Tag</label>
                                                <input class="form-control" name="location" type="text" value="Earth">
                                            </div>
                                        </div>
                                    </div>




                                    <div class=" card  container">

                                        <div class="" role="tab" id="headingOne">



                                            <a type="button" data-toggle="collapse" data-target="#demo">กำหนดแบบย่อ <i class="material-icons">keyboard_arrow_down</i></a>

                                        </div>

                                        <div id="demo" class="collapse" role="tabpanel" aria-labelledby="headingOne" data-parent="#accordion">
                                            <div class="card-body">

                                                <div>
                                            
                                                    <div class="form-group">
                                                        <label for="exampleFormControlInput2">หัวข้อข่าวแบบย่อ</label>
                                                        <input type="text" class="form-control" ng-model="quill_title_yo" id="exampleFormControlInput2" placeholder="หัวข้อ">
                                                      </div>


                                                    <div class="row form-group">
                                                     
                                                        <div class="form-group">
                                                            <label for="exampleFormControlTextarea1">เนื้อหาข่าวแบบย่อ</label>
                                                            <textarea class="form-control"  ng-model="quill_detail_yo" id="exampleFormControlTextarea1" rows="3"></textarea>
                                                          </div>

                                                    </div>
                                                </div>


                                            </div>
                                        </div>
                                    </div>




                              
                                    <div class="form-group">
                                        <label for="exampleFormControlInput3">หัวข้อ</label>
                                        <input type="text" class="form-control" ng-model="quill_title" id="exampleFormControlInput3" placeholder="หัวข้อ">
                                      </div>


                                    <div class="row form-group">
                                        <label for="about">เนื้อหา</label>


                                        <ng-quill-editor ng-model="quill_detail" on-editor-created="editorCreated(editor)" on-content-changed="contentChanged(editor, html, text)" toolbar-enries="bold italic underline"></ng-quill-editor>


                                    </div>



                                    <div class="row">
                                        <button class="btn btn-primary" ng-click="update_news()" type="submit">Save</button>
                                    </div>
                                </form>
                            </div>



                        </div>





                        <div class="col-md-6">


                            <div class="">
                                <div ng-bind-html="trustAsHtml(quill_detail)"></div>

                            </div>
                        </div>
                    </div>
                  </div>

                </div>
            </div>

            <!-- Modal footer -->
            <!-- <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div> -->
        </div>
    </div>






</div>